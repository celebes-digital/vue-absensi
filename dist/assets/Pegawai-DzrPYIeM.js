import{s as L}from"./index-BdlwmbEA.js";import{s as A,a as C,b as T}from"./index-kMO2B_2Z.js";import{s as B}from"./index-7h0g2jJM.js";import{_ as M}from"./Vuelidate-D58-4aDa.js";import{s as U}from"./index-BZEh9QIP.js";import{s as N}from"./index-D3TYj3W6.js";import{s as E}from"./index-J9SwwLSJ.js";import{_ as K,E as u,d as S,c as f,b as i,a as p,w as s,F as O,o as k,C as b,t as w,k as y,ci as F,s as z}from"./index-IT0w0-03.js";import{_ as G}from"./PageHeader-BmhK7qIL.js";import{u as J}from"./index-Cn83LMNj.js";import{r as d,e as q}from"./index-DhnhZP77.js";import{f as R}from"./date-DaizdcBV.js";import"./index-Co2kFwYe.js";import"./index-D1kxKiUG.js";import"./index-D0k6Dizi.js";import"./index-BdwjZwyA.js";import"./index-CKMnAYYC.js";import"./index-Cg8qX79j.js";import"./index-RjTvz6_0.js";const H={name:"AdminPegawai",inject:["default"],data(){return{pegawai:[],filters:{global:{value:null,matchMode:"contains"}},genderOptions:[{label:"Laki-laki",value:"l"},{label:"Perempuan",value:"p"}],no:1,loading:!0,btnIsLoading:!1,formIsLoading:!0,visible:!1,dialogTitle:"",dialogDeskripsi:"",v$:J(),hasValidated:!1,no:1,editPegawaiData:[],formPost:!1,options:{jenisKelamin:[{name:"Laki-Laki",code:"l"},{name:"Perempuan",code:"p"}],agama:[{name:"Islam",code:"islam"},{name:"Kristen",code:"kristen"},{name:"Katolik",code:"katolik"},{name:"Hindu",code:"hindu"},{name:"Buddha",code:"buddha"},{name:"Konghucu",code:"konghucu"}],golDarah:[{name:"A",code:"A"},{name:"B",code:"B"},{name:"AB",code:"AB"},{name:"O",code:"O"},{name:"A+",code:"A+"},{name:"B+",code:"B+"},{name:"AB+",code:"AB+"},{name:"O+",code:"O+"},{name:"A-",code:"A-"},{name:"B-",code:"B-"},{name:"AB-",code:"AB-"},{name:"O-",code:"O-"}]},id_pegawai:"",nama_lengkap:"",email:"",nik:"",tgl_lahir:null,tempat_lahir:"",jk:"",agama:"",gol_darah:"",pendidikan:"",kontak_darurat:"08",mulai_kerja:null,jabatan:"",alamat:"",no_telp:"08",rekening:""}},validations(){return{id_pegawai:{required:d},nama_lengkap:{required:d},email:{required:d,email:q},nik:{required:d},tgl_lahir:{required:d},tempat_lahir:{required:d},jk:{required:d},agama:{required:d},gol_darah:{required:d},pendidikan:{required:d},kontak_darurat:{required:d},mulai_kerja:{required:d},jabatan:{required:d},alamat:{required:d},no_telp:{required:d},rekening:{required:d}}},methods:{formattedDate:R,openPost(){this.formPost=!0,this.visible=!0,this.formIsLoading=!1,this.dialogTitle="Tambahkan Pegawai",this.dialogDeskripsi="Semua data dengan (*) wajib diisi!",this.nama_lengkap="",this.email="",this.nik="",this.tgl_lahir=null,this.tempat_lahir="",this.jk="",this.agama="",this.gol_darah="",this.pendidikan="",this.kontak_darurat="08",this.mulai_kerja=null,this.jabatan="",this.alamat="",this.no_telp="08",this.rekening=""},openEdit(t){this.visible=!0,this.dialogTitle="Edit Pegawai",this.dialogDeskripsi="Semua data dengan (*) wajib diisi!",console.log(t),this.formPost=!1,this.getPegawaiById(t)},close(){this.visible=!1,this.formIsLoading=!0},async getPegawaiAll(){await u.get("pegawai").then(t=>{this.isLoading=!1,this.pegawai=t.data.data}).catch(t=>{console.log("Error:"+t),S.push({name:"not-found"})})},async getPegawaiById(t){await u.get(`pegawai/${t}`).then(e=>{const n=e.data.data;this.editPegawaiData=n,this.formIsLoading=!1,this.id_pegawai=t,this.nama_lengkap=n.nama_lengkap,this.email=n.email,this.nik=n.nik,this.tgl_lahir=n.tgl_lahir,this.tempat_lahir=n.tempat_lahir,this.jk=n.jk,this.agama=n.agama,this.gol_darah=n.gol_darah,this.pendidikan=n.pendidikan,this.kontak_darurat=n.kontak_darurat,this.mulai_kerja=n.mulai_kerja,this.jabatan=n.jabatan,this.alamat=n.alamat,this.no_telp=n.no_telp,this.rekening=n.rekening}).catch(e=>{console.log(e),console.log(localStorage.getItem("token"))})},exportCSV(){this.$refs.dt.exportCSV()},async editPegawai(t){this.btnIsLoading=!0,this.hasValidated=!0,this.v$.$validate();const e={nama_lengkap:this.nama_lengkap,email:this.email,nik:this.nik,tgl_lahir:this.formattedDate(this.tgl_lahir),tempat_lahir:this.tempat_lahir,jk:this.jk,agama:this.agama,gol_darah:this.gol_darah,pendidikan:this.pendidikan,kontak_darurat:this.kontak_darurat,mulai_kerja:this.formattedDate(this.mulai_kerja),jabatan:this.jabatan,alamat:this.alamat,no_telp:this.no_telp,rekening:this.rekening};this.visible=!1,await u.put(`pegawai/${t}`,e).then(n=>{this.hasValidated=!1,this.visible=!1,this.btnIsLoading=!1,this.getPegawaiAll()}).catch(n=>{console.log("Error ryan : "+n),console.log(n),this.btnIsLoading=!1,console.log(localStorage.getItem("token"))})},async postPegawai(){this.btnIsLoading=!0,this.hasValidated=!0,this.v$.$validate();const t={nama_lengkap:this.nama_lengkap,email:this.email,nik:this.nik,tgl_lahir:this.formattedDate(this.tgl_lahir),tempat_lahir:this.tempat_lahir,jk:this.jk,agama:this.agama,gol_darah:this.gol_darah,pendidikan:this.pendidikan,kontak_darurat:this.kontak_darurat,mulai_kerja:this.formattedDate(this.mulai_kerja),jabatan:this.jabatan,alamat:this.alamat,no_telp:this.no_telp,rekening:this.rekening};await u.post("pegawai",t).then(e=>{this.hasValidated=!1,this.visible=!1,this.btnIsLoading=!1,this.$toast.add({severity:"success",summary:"Pegawai berhasil ditambahkan!",detail:`Menambahkan pegawai ${e.data.data.nama_lengkap}`,life:5e3}),this.getPegawaiAll()}).catch(e=>{console.log(e),this.btnIsLoading=!1,this.$toast.add({severity:"error",summary:"Pegawai gagal ditambahkan!",detail:"Gagal menambahkan pegawai",life:5e3}),this.getPegawaiAll()})},async funDelete(t){await u.delete(`pegawai/${t}`).then(e=>{this.getPegawaiAll(),console.log("berhasil delete"),console.log(e)}).catch(e=>{console.log(e)})},deletePegawai(t,e){this.$confirm.require({target:t.currentTarget,message:"Apakah kamu yakin menghapus data ini?",icon:"pi pi-info-circle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{this.$toast.add({severity:"success",summary:"Data berhasil dihapus",detail:"Data pegawai berhasil dihapus",life:5e3}),this.funDelete(e)},reject:()=>{this.$toast.add({severity:"error",summary:"Tidak jadi",detail:"kamu memutuskan untuk tidak menghapus data nya",life:5e3})}})},async emailVerification(t){const e={email:t};await u.post("email/send-verification",e).then(n=>{this.$toast.add({severity:"success",summary:"Pegawai berhasil ditambahkan!",detail:"Menambahkan pegawai aja",life:5e3}),console.log(n)}).catch(n=>{this.$toast.add({severity:"error",summary:"Gagal mengirimkan validasi email",detail:"Email tidak terkirim",life:5e3}),console.log(n)})},openEmailVerification(t,e){this.$confirm.require({target:t.currentTarget,message:"Kirim email verifikasi?",icon:"pi pi-info-circle",rejectProps:{label:"Tidak",severity:"secondary",outlined:!0},acceptProps:{label:"Kirim",severity:"success"},accept:()=>{this.emailVerification(e),this.$toast.add({severity:"success",summary:"Email telah terkirim",detail:"",life:5e3})},reject:()=>{this.$toast.add({severity:"error",summary:"Tidak jadi",detail:"kamu memutuskan untuk tidak menghapus data nya",life:5e3})}})},calculateRowNumber(t){console.log(t)},async getPegawaiAll(){try{const t=await u.get("pegawai");this.pegawai=t.data.data,this.loading=!1}catch(t){console.log("Error:"+t),this.loading=!1}},clearFilter(){this.filters={global:{value:null,matchMode:"contains"}}}},mounted(){this.getPegawaiAll()}},Q={class:"grid grid-cols-12 gap-5 m-5 mb-24 lg:mb-5"},W={class:"flex justify-between"},X={class:"flex gap-2"},Y={class:"card"},Z={class:"flex justify-between"},$={class:"flex gap-2 bg-white"},aa={class:"text-surface-500 dark:text-surface-400 block mb-8"},ea={key:0,class:"grid grid-cols-12 gap-5 h-96 m-5"},ia={class:"col-span-12 w-full flex justify-center items-center"},la={key:1,class:"w-full grid grid-cols-12 gap-2"},ta={class:"col-span-12 flex justify-end gap-2"};function na(t,e,n,sa,a,h){const j=F,x=G,g=z,m=E,V=N,o=A,P=C,D=U,r=M,v=B,c=T,I=L;return k(),f(O,null,[i(j),p("div",Q,[i(x,{title:"Pegawai"}),i(D,{class:"shadow-md col-span-12 lg:col-span-12 xl:col-span-12"},{title:s(()=>[p("div",W,[e[20]||(e[20]=p("h3",null,"Daftar Pegawai",-1)),p("div",X,[i(g,{icon:"pi pi-user-plus",label:"Tambah",onClick:h.openPost},null,8,["onClick"])])])]),content:s(()=>[p("div",Y,[i(P,{filters:a.filters,"onUpdate:filters":e[2]||(e[2]=l=>a.filters=l),value:a.pegawai,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],scrollable:"",tableStyle:"min-width: 50rem",loading:a.loading,filterDisplay:"menu"},{header:s(()=>[p("div",Z,[i(g,{type:"button",icon:"pi pi-filter-slash",label:"Bersihkan Filter",outlined:"",onClick:e[0]||(e[0]=l=>h.clearFilter())}),i(m,{modelValue:a.filters.global.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.filters.global.value=l),placeholder:"Cari data"},null,8,["modelValue"])])]),loading:s(()=>[i(V)]),empty:s(()=>e[21]||(e[21]=[b(" Data tidak ditemukan. ")])),default:s(()=>[i(o,{field:"nama_lengkap",header:"Nama",style:{"min-width":"300px"},class:"capitalize"}),i(o,{field:"",header:"Jenis Kelamin",style:{"min-width":"150px"}},{body:s(l=>[b(w(l.data.jk=="l"?"Laki-laki":"Perempuan"),1)]),_:1}),i(o,{field:"jabatan",header:"Jabatan",style:{"min-width":"200px"}}),i(o,{field:"email",header:"Email",style:{"min-width":"250px"}}),i(o,{field:"rekening",header:"Rekening",style:{"min-width":"250px"}}),i(o,{field:"nik",header:"NIK",style:{"min-width":"250px"}}),i(o,{field:"tempat_lahir",header:"Tempat Lahir",style:{"min-width":"200px"},class:"capitalize"}),i(o,{field:"tgl_lahir",header:"Tanggal Lahir",style:{"min-width":"200px"}}),i(o,{field:"alamat",header:"Alamat",style:{"min-width":"250px"},class:"capitalize"}),i(o,{field:"no_telp",header:"No. Telepon",style:{"min-width":"200px"}}),i(o,{field:"kontak_darurat",header:"No. Telp Darurat",style:{"min-width":"200px"}}),i(o,{field:"agama",header:"Agama",style:{"min-width":"150px"},class:"capitalize"}),i(o,{field:"gol_darah",header:"Gol. Darah",style:{"min-width":"150px"}}),i(o,{field:"pendidikan",header:"Pendidikan",style:{"min-width":"150px"},class:"capitalize"}),i(o,{field:"mulai_kerja",header:"Mulai Kerja",style:{"min-width":"150px"}}),i(o,{header:"Action",frozen:"",alignFrozen:"right"},{body:s(l=>[p("div",$,[i(g,{icon:"pi pi-envelope",severity:"success","aria-label":"Notification",onClick:_=>h.emailVerification(l.data.email)},null,8,["onClick"]),i(g,{icon:"pi pi-pencil",severity:"info","aria-label":"Notification",onClick:_=>h.openEdit(l.data.id_pegawai)},null,8,["onClick"]),i(g,{icon:"pi pi-trash",severity:"danger","aria-label":"Notification",onClick:_=>h.deletePegawai(_,l.data.id_pegawai)},null,8,["onClick"])])]),_:1})]),_:1},8,["filters","value","loading"])])]),_:1})]),i(I,{visible:a.visible,"onUpdate:visible":e[19]||(e[19]=l=>a.visible=l),closable:!1,draggable:!1,closeOnEscape:!1,modal:"",header:a.dialogTitle,style:{width:"75rem"}},{default:s(()=>[p("span",aa,w(a.dialogDeskripsi),1),a.formIsLoading?(k(),f("div",ea,[p("div",ia,[i(V)])])):(k(),f("form",la,[i(r,{name:"nama_lengkap",label:"Nama Lengkap",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"nama_lengkap",modelValue:a.nama_lengkap,"onUpdate:modelValue":e[3]||(e[3]=l=>a.nama_lengkap=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid,placeholder:"Masukkan nama lengkap pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"email",label:"Email",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"email",modelValue:a.email,"onUpdate:modelValue":e[4]||(e[4]=l=>a.email=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.email.$invalid,placeholder:"Masukkan email pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"nik",label:"NIK",hasValidated:a.hasValidated},{default:s(()=>[i(m,{modelValue:a.nik,"onUpdate:modelValue":e[5]||(e[5]=l=>a.nik=l),id:"nik",useGrouping:!1,fluid:"",class:"col-span-12",invalid:a.hasValidated&&a.v$.nik.$invalid,placeholder:"Masukkan NIK pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"tempat_lahir",label:"Tempat Lahir",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"tempat_lahir",modelValue:a.tempat_lahir,"onUpdate:modelValue":e[6]||(e[6]=l=>a.tempat_lahir=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.tempat_lahir.$invalid,placeholder:"Masukkan tempat lahir pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"tgl_lahir",label:"Tanggal Lahir",hasValidated:a.hasValidated},{default:s(()=>[i(v,{inputId:"tgl_lahir",modelValue:a.tgl_lahir,"onUpdate:modelValue":e[7]||(e[7]=l=>a.tgl_lahir=l),dateFormat:"yy-mm-dd",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.tgl_lahir.$invalid,placeholder:"Masukkan tanggal lahir pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"alamat",label:"Alamat",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"alamat",modelValue:a.alamat,"onUpdate:modelValue":e[8]||(e[8]=l=>a.alamat=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.alamat.$invalid,placeholder:"Masukkan alamat pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"jk",label:"Jenis Kelamin",hasValidated:a.hasValidated},{default:s(()=>[i(c,{inputId:"jk",modelValue:a.jk,"onUpdate:modelValue":e[9]||(e[9]=l=>a.jk=l),options:a.options.jenisKelamin,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.jk.$invalid,placeholder:"Masukkan jenis kelamin pegawai"},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"agama",label:"Agama",hasValidated:a.hasValidated},{default:s(()=>[i(c,{inputId:"agama",modelValue:a.agama,"onUpdate:modelValue":e[10]||(e[10]=l=>a.agama=l),options:a.options.agama,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.agama.$invalid,placeholder:"Masukkan agama pegawai"},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"gol_darah",label:"Golongan Darah",hasValidated:a.hasValidated},{default:s(()=>[i(c,{inputId:"gol_darah",modelValue:a.gol_darah,"onUpdate:modelValue":e[11]||(e[11]=l=>a.gol_darah=l),options:a.options.golDarah,optionLabel:"name",optionValue:"code",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.gol_darah.$invalid,placeholder:"Masukkan golongan darah pegawai"},null,8,["modelValue","options","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"no_telp",label:"Nomor Telepon",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"no_telp",useGrouping:!1,fluid:"",modelValue:a.no_telp,"onUpdate:modelValue":e[12]||(e[12]=l=>a.no_telp=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.no_telp.$invalid,placeholder:"Masukkan nomor telepon pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"kontak_darurat",label:"Kontak Darurat",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"kontak_darurat",useGrouping:!1,fluid:"",modelValue:a.kontak_darurat,"onUpdate:modelValue":e[13]||(e[13]=l=>a.kontak_darurat=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.kontak_darurat.$invalid,placeholder:"Masukkan kontak darurat pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"rekening",label:"Nomor Rekening",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"rekening",modelValue:a.rekening,"onUpdate:modelValue":e[14]||(e[14]=l=>a.rekening=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.rekening.$invalid,placeholder:"Masukkan nomor rekening pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"mulai_kerja",label:"Tanggal Mulai Kerja",hasValidated:a.hasValidated},{default:s(()=>[i(v,{inputId:"mulai_kerja",modelValue:a.mulai_kerja,"onUpdate:modelValue":e[15]||(e[15]=l=>a.mulai_kerja=l),dateFormat:"dd-mm-yy",class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.mulai_kerja.$invalid,placeholder:"Masukkan tanggal mulai kerja pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"jabatan",label:"Jabatan",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"jabatan",modelValue:a.jabatan,"onUpdate:modelValue":e[16]||(e[16]=l=>a.jabatan=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.jabatan.$invalid,placeholder:"Masukkan jabatan pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),i(r,{name:"pendidikan",label:"Pendidikan",hasValidated:a.hasValidated},{default:s(()=>[i(m,{id:"pendidikan",modelValue:a.pendidikan,"onUpdate:modelValue":e[17]||(e[17]=l=>a.pendidikan=l),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.pendidikan.$invalid,placeholder:"Masukkan pendidikan pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),p("div",ta,[i(g,{type:"button",label:"Close",severity:"secondary",onClick:h.close},null,8,["onClick"]),a.formPost?(k(),y(g,{key:1,type:"button",label:"Tambah",loading:a.btnIsLoading,onClick:h.postPegawai},null,8,["loading","onClick"])):(k(),y(g,{key:0,type:"button",label:"Edit",loading:a.btnIsLoading,onClick:e[18]||(e[18]=l=>h.editPegawai(a.id_pegawai))},null,8,["loading"]))])]))]),_:1},8,["visible","header"])],64)}const Pa=K(H,[["render",na]]);export{Pa as default};
