import{s as B,a as E}from"./index-kMO2B_2Z.js";import{_ as b,o as n,c as m,b as s,k as p,i as w,s as D,E as v,w as l,a as C,C as f,t as y,F as _,f as S,q as $}from"./index-IT0w0-03.js";import{s as N}from"./index-D3TYj3W6.js";import{s as F}from"./index-J9SwwLSJ.js";const T={name:"TableActionStandard",props:{id:{type:Number,required:!0},deleteAble:Boolean},methods:{confirmDelete(e){this.$confirm.require({target:e.currentTarget,message:"Do you want to delete this data?",icon:"pi pi-info-circle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{this.$emit("delete",this.id),this.$toast.add({severity:"info",summary:"Confirmed",detail:"Data berhasl dihapus.",life:3e3})},reject:()=>{this.$toast.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}}},V={class:"flex gap-2 bg-white"};function I(e,t,a,k,i,o){const d=D;return n(),m("div",V,[s(d,{icon:"pi pi-pencil",severity:"info","aria-label":"Edit",onClick:t[0]||(t[0]=c=>e.$emit("edit",a.id))}),a.deleteAble?(n(),p(d,{key:0,onClick:t[1]||(t[1]=c=>o.confirmDelete(c)),icon:"pi pi-trash","aria-label":"Delete",severity:"danger",class:"bg-red-500 text-white",outlined:""})):w("",!0)])}const L=b(T,[["render",I]]);async function P(e){try{return(await v.get(e)).data.data}catch(t){throw console.error(t),t}}async function Y(e,t){try{const a=await v.delete(e+"/"+t);return console.log(a.data.data),a.data.data}catch(a){throw console.error(a),a}}const q={name:"TableDefault",inject:["default"],emits:["openEdit","openDelete"],props:{columns:Array,api:String,apiEdit:String,id:String,idPegawai:String,dataLuar:Array,deleteAble:{type:Boolean,default:!0},refresh:{type:Boolean,default:!1},cusAction:{type:Boolean,default:!1}},data(){return{data:[],loading:!0,filters:{global:{value:null,matchMode:"contains"}}}},methods:{async created(){this.refresh&&(this.loading=!0);try{this.data=await P(this.api),this.loading=!1}catch(e){console.error("Failed to fetch data:",e)}},handleEdit(e){this.$emit("openEdit",e),console.log("Edit ID:",e)},handleDelete(e){this.$emit("openDelete",e),console.log("Hapus ID:",e)},clearFilter(){this.filters={global:{value:null,matchMode:"contains"}}},calculateRowNumber(e){return(this.$refs.dt&&this.$refs.dt.first?this.$refs.dt.first:0)+(this.dataLuar?this.dataLuar.indexOf(e.data):this.data.indexOf(e.data))+1}},mounted(){this.created()}},O={class:"flex justify-between"};function R(e,t,a,k,i,o){const d=D,c=F,x=N,h=B,A=L,j=E;return n(),p(j,{filters:i.filters,"onUpdate:filters":t[2]||(t[2]=r=>i.filters=r),value:a.dataLuar??i.data,tableStyle:"min-width: 50rem",paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],scrollable:"",loading:i.loading,filterDisplay:"menu"},{header:l(()=>[C("div",O,[s(d,{type:"button",icon:"pi pi-filter-slash",label:"Bersihkan Filter",outlined:"",onClick:t[0]||(t[0]=r=>o.clearFilter())}),s(c,{modelValue:i.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=r=>i.filters.global.value=r),placeholder:"Cari data"},null,8,["modelValue"])])]),loading:l(()=>[s(x)]),empty:l(()=>t[3]||(t[3]=[f(" Data tidak ditemukan. ")])),default:l(()=>[s(h,{field:"no",header:"No."},{body:l(r=>[f(y(o.calculateRowNumber(r)+"."),1)]),_:1}),(n(!0),m(_,null,S(a.columns,r=>(n(),p(h,{key:r.field,field:r.field,header:r.header},{body:l(({data:u,field:g})=>[g==="jadwal.nama_jadwal"?(n(),m(_,{key:0},[f(y(u.jadwal?u.jadwal.nama_jadwal:u[g]),1)],64)):(n(),m(_,{key:1},[f(y(u[g]),1)],64))]),_:2},1032,["field","header"]))),128)),$(e.$slots,"default"),a.cusAction?w("",!0):(n(),p(h,{key:0,header:"Action",frozen:"",alignFrozen:"right",style:{width:"100px"}},{body:l(r=>[s(A,{onEdit:o.handleEdit,onDelete:o.handleDelete,deleteAble:a.deleteAble,id:r.data[a.id]},null,8,["onEdit","onDelete","deleteAble","id"])]),_:1}))]),_:3},8,["filters","value","loading"])}const G=b(q,[["render",R]]);export{G as _,Y as d,P as g};
