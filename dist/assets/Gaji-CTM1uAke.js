import{s as P}from"./index-BdlwmbEA.js";import{s as y}from"./index-J9SwwLSJ.js";import{b as x,c as G}from"./index-kMO2B_2Z.js";import{_ as D}from"./Vuelidate-D58-4aDa.js";import{s as E}from"./index-D3TYj3W6.js";import{s as C}from"./index-BZEh9QIP.js";import{d as T,g as B,_ as L}from"./Default-rdowlBa5.js";import{_ as I,E as h,c,b as n,w as l,o as r,a as o,t as N,k as _,s as S}from"./index-IT0w0-03.js";import{_ as U}from"./PageHeader-BmhK7qIL.js";import{u as M}from"./index-Cn83LMNj.js";import{r as p}from"./index-DhnhZP77.js";import"./index-Co2kFwYe.js";import"./index-D1kxKiUG.js";import"./index-D0k6Dizi.js";import"./index-BdwjZwyA.js";import"./index-CKMnAYYC.js";const O={data(){return{isLoading:!0,idGaji:null,visibleGajiDialog:!1,columns:[{field:"nama_pegawai",header:"Nama Pegawai"},{field:"gaji_pokok",header:"Gaji Pokok"},{field:"tunjangan",header:"Tunjangan"},{field:"nama_bank",header:"Nama Bank"},{field:"rekening",header:"No. Rekening"}],data:[],pegawai:null,daftarPegawai:null,phPegawai:"Loading...",loadingPegawai:!0,v$:M(),hasValidated:!1,formPost:!1,id_gaji:null,pegawai:null,gaji_pokok:null,tunjangan:null,rekening:"",nama_bank:"",formIsLoading:!1,dialogTitle:""}},validations(){return{id_pegawai:{required:p},gaji_pokok:{required:p},tunjangan:{required:p},nama_bank:{required:p},rekening:{required:p}}},methods:{toggleGajiDialog(){this.visibleGajiDialog=!this.visibleGajiDialog},handleDelete(e){T("/gaji",e),this.created()},handleEdit(e){this.idGaji=e,this.formIsLoading=!0,this.dialogTitle="Edit Gaji Pegawai",this.formPost=!1,this.getPegawaiAll(),this.toggleGajiDialog(),this.getGajiById(e)},async created(){try{this.data=await B("/gaji"),this.isLoading=!1}catch(e){console.error("Failed to fetch data:",e)}},openPost(){this.formPost=!0,this.pegawai=null,this.gaji_pokok=null,this.tunjangan=null,this.rekening="",this.nama_bank="",this.toggleGajiDialog(),this.dialogTitle="Tambahkan Gaji Pegawai",this.getPegawaiAll()},async post(){this.toggleGajiDialog(),this.hasValidated=!0;const e={id_pegawai:this.pegawai.id_pegawai,gaji_pokok:this.gaji_pokok,tunjangan:this.tunjangan,nama_bank:this.nama_bank,rekening:this.rekening};await h.post("/gaji",e).then(i=>{this.$toast.add({severity:"success",summary:"Success",detail:i.data.message,life:3e3}),this.created()}).catch(i=>{console.log(i),this.$toast.add({severity:"error",summary:"Error",detail:i,life:3e3})})},async edit(e){this.toggleGajiDialog();const i={id_pegawai:this.pegawai.id_pegawai,gaji_pokok:this.gaji_pokok,tunjangan:this.tunjangan,nama_bank:this.nama_bank,rekening:this.rekening};await h.patch("gaji/"+e,i).then(m=>{this.visible=!1,this.$toast.add({severity:"info",summary:"Edit Berhasil",detail:`Gaji ${m.data.data.pegawai.nama_lengkap} Berhasil Di Edit`,life:3e3}),this.created()}).catch(m=>{console.log(m)})},async getPegawaiAll(){try{const e=await h.get("pegawai");this.daftarPegawai=e.data.data,this.loadingPegawai=!1,this.phPegawai="Pilih pegawai"}catch(e){console.log("Error:"+e),this.phPegawai="Error",this.loadingPegawai=!1}},async getGajiById(e){await h.get("gaji/"+e).then(i=>{this.id_gaji=i.data.data.id_gaji,this.pegawai=i.data.data.pegawai,this.tunjangan=i.data.data.tunjangan,this.gaji_pokok=i.data.data.gaji_pokok,this.nama_bank=i.data.data.nama_bank,this.rekening=i.data.data.rekening,this.phPegawai=i.data.data.pegawai.nama_lengkap,this.formIsLoading=!1}).catch(i=>{console.log(i)})}},mounted(){this.created()}},A={class:"grid grid-cols-12 m-5 gap-5"},R={class:"flex justify-between"},q={class:"flex gap-2"},F={key:0,class:"grid grid-cols-12 gap-5 h-96 m-5"},H={class:"col-span-12 w-full flex justify-center items-center"},z={key:1,class:"p-7 overflow-auto"},J={class:"w-full grid grid-cols-12 gap-2"},K={class:"col-span-12 text-xl mb-6 font-semibold"},Q={class:"flex justify-end gap-2"};function W(e,i,m,X,a,s){const j=U,d=S,f=L,w=C,b=E,V=x,g=D,u=G,k=y,v=P;return r(),c("div",A,[n(j,{title:"Gaji"}),n(w,{class:"col-span-12 shadow-md"},{title:l(()=>[o("div",R,[i[7]||(i[7]=o("h3",null,"Daftar Gaji Pegawai",-1)),o("div",q,[n(d,{icon:"pi pi-plus-circle",label:"Tambah Gaji",onClick:s.openPost},null,8,["onClick"]),n(d,{icon:"pi pi-external-link",label:"Export",onClick:i[0]||(i[0]=t=>e.exportCSV(t))})])])]),content:l(()=>[n(f,{columns:a.columns,onOpenDelete:s.handleDelete,onOpenEdit:s.handleEdit,api:"/gaji",dataLuar:a.data,id:"id_gaji"},null,8,["columns","onOpenDelete","onOpenEdit","dataLuar"])]),_:1}),n(v,{visible:a.visibleGajiDialog,modal:"",header:"Tambah Gaji Pegawai",style:{width:"70rem"}},{container:l(()=>[a.formIsLoading?(r(),c("div",F,[o("div",H,[n(b)])])):(r(),c("div",z,[o("form",J,[o("p",K,N(a.dialogTitle),1),n(g,{name:"nama_lengkap",label:"Pilih Pegawai",hasValidated:a.hasValidated},{default:l(()=>[n(V,{class:"col-span-12 max-h-[46px]",disabled:!a.formPost,modelValue:a.pegawai,"onUpdate:modelValue":i[1]||(i[1]=t=>a.pegawai=t),options:a.daftarPegawai,optionLabel:"nama_lengkap",loading:a.loadingPegawai,placeholder:a.phPegawai,filter:""},null,8,["disabled","modelValue","options","loading","placeholder"])]),_:1},8,["hasValidated"]),n(g,{name:"gaji_pokok",label:"Gaji Pokok",hasValidated:a.hasValidated},{default:l(()=>[n(u,{id:"gaji_pokok",modelValue:a.gaji_pokok,"onUpdate:modelValue":i[2]||(i[2]=t=>a.gaji_pokok=t),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid,placeholder:"Masukkan gaji pokok pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(g,{name:"tunjangan",label:"Tunjangan",hasValidated:a.hasValidated},{default:l(()=>[n(u,{id:"tunjangan",modelValue:a.tunjangan,"onUpdate:modelValue":i[3]||(i[3]=t=>a.tunjangan=t),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid,placeholder:"Masukkan tunjangan pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(g,{name:"rekening",label:"No Rekening",hasValidated:a.hasValidated},{default:l(()=>[n(k,{id:"rekening",modelValue:a.rekening,"onUpdate:modelValue":i[4]||(i[4]=t=>a.rekening=t),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid,placeholder:"Masukkan no rekening pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"]),n(g,{name:"nama_bank",label:"Nama Bank",hasValidated:a.hasValidated},{default:l(()=>[n(k,{id:"nama_bank",modelValue:a.nama_bank,"onUpdate:modelValue":i[5]||(i[5]=t=>a.nama_bank=t),class:"col-span-12 max-h-[46px]",invalid:a.hasValidated&&a.v$.name.$invalid,placeholder:"Masukkan nama bank pegawai"},null,8,["modelValue","invalid"])]),_:1},8,["hasValidated"])]),o("div",Q,[n(d,{type:"button",label:"Cancel",severity:"secondary",onClick:s.toggleGajiDialog},null,8,["onClick"]),a.id_gaji?(r(),_(d,{key:0,type:"button",label:"Edit",onClick:i[6]||(i[6]=t=>s.edit(a.id_gaji))})):(r(),_(d,{key:1,type:"button",label:"Tambahkan",onClick:s.post},null,8,["onClick"]))])]))]),_:1},8,["visible"])])}const ha=I(O,[["render",W]]);export{ha as default};
