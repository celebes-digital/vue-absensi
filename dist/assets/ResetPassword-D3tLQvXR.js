import{s as c}from"./index-BZEh9QIP.js";import{a as f,s as w}from"./index-BgSt7lMH.js";import{_ as h,u as k,E as g,c as v,b as a,w as r,o as _,C as b,a as i,l as y,v as V,s as P,e as S}from"./index-IT0w0-03.js";import"./index-VH5_t4r8.js";import"./index-J9SwwLSJ.js";const U={name:"ResetPassword",inject:["default"],data(){return{password:"",password_confirm:"",dashboard:"",passValid:!1,authStore:k(),dataUser:0,dataRole:0}},methods:{getToken(){localStorage.setItem("token",this.$route.query.token)},async kirim(){if(this.password!==this.password_confirm){this.$toast.add({severity:"error",summary:"Password Gagal Diganti",detail:"Password dan konfirmasi password tidak cocok.",life:5e3});return}const t={email:this.$route.query.email,password:this.password,password_confirmation:this.password_confirm};try{await g.post(`/password-reset?token=${this.$route.query.token}&email=${this.$route.query.email}`,t),this.$toast.add({severity:"success",summary:"Password Berhasil Diganti",detail:"Masuk dengan password baru.",life:5e3}),await this.authStore.login({email:this.$route.query.email,password:this.password})}catch(s){console.error(s),this.$toast.add({severity:"error",summary:"Password Gagal Diganti",detail:"Silakan coba lagi.",life:5e3})}},async getUser(){await this.authStore.getUser(),this.dataUser=this.authStore.authUser,this.dataRole=this.authStore.userRole,this.dataRole=="admin"?this.dashboard="AdminDashboard":this.dashboard="UserDashboard"}},async mounted(){await this.getUser(),this.getToken(),this.isLoading=!1}},x={class:"flex w-full h-dvh items-center justify-center"},$={class:"flex flex-col gap-2"},R={class:"flex justify-center"};function q(t,s,D,B,e,u){const l=P,m=S("RouterLink"),n=f,d=w,p=c;return _(),v("div",x,[a(p,{class:"col-span-12 shadow-md"},{title:r(()=>s[3]||(s[3]=[b(" Masukkan Password Baru ")])),content:r(()=>[i("div",$,[i("div",R,[y(a(m,{to:e.dashboard},{default:r(()=>[a(l,{label:"Kembali ke Dashboard"})]),_:1},8,["to"]),[[V,t.token]])])]),i("form",{onSubmit:s[2]||(s[2]=(...o)=>t.prevent&&t.prevent(...o)),class:"flex flex-col gap-2"},[a(d,{variant:"in",class:"w-full"},{default:r(()=>[a(n,{class:"w-full",modelValue:e.password,"onUpdate:modelValue":s[0]||(s[0]=o=>e.password=o),toggleMask:"",feedback:!1,inputId:"pass",variant:"filled",invalid:e.passValid,required:""},null,8,["modelValue","invalid"]),s[4]||(s[4]=i("label",{for:"pass",class:"w-full"},"Password",-1))]),_:1}),a(d,{variant:"in",class:"w-full"},{default:r(()=>[a(n,{class:"w-full",modelValue:e.password_confirm,"onUpdate:modelValue":s[1]||(s[1]=o=>e.password_confirm=o),toggleMask:"",feedback:!1,inputId:"passcon",variant:"filled",invalid:e.passValid,required:""},null,8,["modelValue","invalid"]),s[5]||(s[5]=i("label",{for:"passcon",class:"w-full"},"Ulang Password",-1))]),_:1}),a(l,{label:"Kirim",onClick:u.kirim},null,8,["onClick"])],32)]),_:1})])}const N=h(U,[["render",q]]);export{N as default};
